<html>
    <head>
        <title>Puzzle</title>
        <!-- bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <meta charset="utf-8"/>
    </head>
    <body>
        <img src="Crash_Tumbalobos.jpg" class="img-fluid" style="width: 300px; padding: 50px;">
        <br>
        <br>
        <div style="margin-left: 10px;">
        <input style="height: 40px;" type="color" class="form-control form-control-color" id="exampleColorInput" value="#563d7c" title="Choose your color">
        <input style="border-color: black; width: 500px;" type="text" class="form-control" id="escribirImagen" placeholder="Escribir las dimensiones">
        </div>
        <br>
        <button id ="seleccionarPersonaje" class="btn btn-success">Seleccionar Personaje</button>
        <br>
        <br>
        <div class="col-sm-10" style="display: none;" id="mostrarImagen"><input type="file" id="imagen" name="imagen" accept="image/jpeg" data-validation-allowing="jpg" data-validation-error-msg="Elija una imagen con formato JPG." data-validation="required" />
            <p class="help-block">formato .JPG (requerido)</p>
        </div>
        <br>
        <br>
        <button id ="iniciarJuego" class="btn btn-success" style="display: none;">iniciar juego</button>

    <br />

    <div style="width: 10px;" id="idteste2" class="image">
    </div>
    <p>
    </p>
    </p>
        <script>
            $(document).ready(function() {
                $("#seleccionarPersonaje").click(function() {
                    $("#mostrarImagen").show()
                    $("#iniciarJuego").show()
                });

                $("#iniciarJuego").click(function() {
                    
                

            var tmpImg = new Image();
        tmpImg.src = "Crash_Tumbalobos.jpg";
        $(tmpImg).one('load', function() {
        widthImg = tmpImg.width;
        heightImg = tmpImg.height;

        $("#idteste2").css("width", widthImg);
        $("#idteste2").css("height", heightImg);

        var resWidth = parseInt(Math.floor(widthImg / 3));
        var resHeight = parseInt(Math.floor(heightImg / 3));
        resWidth = resWidth - 1.5;
        resHeight = resHeight - 2;

        link = "Crash_Tumbalobos.jpg";


        valuePxl = 0;
        count = 0;
        for (var i = 0; i < 3; i++) {
            for (var j = 0; j < 3; j++) {
            if (count == 0) {
                $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css("background", "url('" + link + "')");
                $(".box" + count).css("margin-left", "-1px");
            };

            if (count == 1) {
                $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css("margin-left", "-1px");
                $(".box" + count).css("background", "url('" + link + "')");
                valuePxl = ((parseInt(resWidth)) * 2);
                $(".box" + count).css("background-position", valuePxl + "px 0px");
            };

            if (count == 2) {
                $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css("margin-left", "-1px");
                $(".box" + count).css("background", "url('" + link + "')");
                valuePxl = resWidth;
                $(".box" + count).css("background-position", valuePxl + "px 0px");
            };

            if (count == 3) {
                $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css({
                "margin-left": "-1px",
                "margin-top": "-1px"
                });
                $(".box" + count).css("background", "url('" + link + "')");
                valuePxl = resHeight * 2;
                $(".box" + count).css("background-position", "0px " + valuePxl + "px");
            };

            if (count == 4) {
                $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css({
                "margin-left": "-1px",
                "margin-top": "-1px"
                });
                $(".box" + count).css("background", "url('" + link + "')");
                valuePxlWidth = ((parseInt(resWidth)) * 2);
                valuePxlWeight = ((parseInt(resHeight)) * 2);
                $(".box" + count).css("background-position", valuePxlWidth + "px " + valuePxlWeight + "px");
            };

            if (count == 5) {
                $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css({
                "margin-left": "-1px",
                "margin-top": "-1px"
                });
                $(".box" + count).css("background", "url('" + link + "')");
                valuePxl = resWidth;
                valuePxlWeight = ((parseInt(resHeight)) * 2);
                $(".box" + count).css("background-position", valuePxl + "px " + valuePxlWeight + "px");
            };

            if (count == 6) {
                $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css({
                "margin-left": "-1px",
                "margin-top": "-1px"
                });
                $(".box" + count).css("background", "url('" + link + "')");
                valuePxlWidth = ((parseInt(resWidth)) * 3);
                valuePxlWeight = Math.floor((parseInt(resHeight)) * 1);
                console.log(resHeight+" "+valuePxlWeight);
                $(".box" + count).css("background-position", 0 + "px " + valuePxlWeight + "px");
            };

            if (count == 7) {
            $("#idteste2").append("<div class=\"box box" + count + "\"></div>");
                $(".box" + count).css({
                "margin-left": "-1px",
                "margin-top": "-1px"
                });
                $(".box" + count).css("background", "url('" + link + "')");
                valuePxlWidth = ((parseInt(resWidth)) * 2);
                valuePxlWeight = ((parseInt(resHeight)) * 1);
                $(".box" + count).css("background-position", valuePxlWidth + "px " + valuePxlWeight + "px");
            };

            count++;
            };
        };


        $(".box").css("width", resWidth);
        $(".box").css("height", resHeight);
        $(".box").css("border", "1px solid black");


        });
    });

});
    </script>
    </body>
</html>